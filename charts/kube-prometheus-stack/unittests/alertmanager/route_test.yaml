suite: alertmanager route backendRefs
templates:
  - alertmanager/route.yaml
tests:
  - it: includes explicit group kind and weight defaults
    set:
      alertmanager.enabled: true
      alertmanager.route.main.enabled: true
    asserts:
      - equal:
          path: spec.rules[0].backendRefs[0].group
          value: ""
      - equal:
          path: spec.rules[0].backendRefs[0].kind
          value: Service
      - equal:
          path: spec.rules[0].backendRefs[0].weight
          value: 1
