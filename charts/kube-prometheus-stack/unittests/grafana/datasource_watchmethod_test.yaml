# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/main/schema/helm-testsuite.json
suite: grafana datasource watch method
templates:
  - charts/grafana/templates/deployment.yaml
tests:
  - it: defaults to SLEEP to avoid missing initial datasource sync
    asserts:
      - equal:
          path: spec.template.spec.containers[1].name
          value: grafana-sc-datasources
      - equal:
          path: spec.template.spec.containers[1].env[1].value
          value: SLEEP
